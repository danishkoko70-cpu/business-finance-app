<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login • Finance App</title>
  <link rel="stylesheet" href="assets/css/style.css"/>
</head>
<body>
  <div class="loginwrap">
    <div class="hero">
      <div class="logo" style="margin:0 auto 12px auto;"><img src="/assets/img/logo.png" alt=""/></div>
      <h2>Business Finance Web App</h2>
      <p>Phase 5 • Ready to host (no backend)</p>
    </div>

    <div class="card">
      <div class="formgrid" style="grid-template-columns:1fr;">
        <div>
          <label>Username</label>
          <input class="input" id="username" placeholder="admin or manager" autocomplete="username"/>
        </div>
        <div>
          <label>Password</label>
          <input class="input" id="password" type="password" placeholder="••••••••" autocomplete="current-password"/>
        </div>
        <div class="hstack" style="justify-content:space-between;">
          <button class="btn btn-primary" id="btnLogin">Login</button>
          <button class="btn" id="btnDemo">Fill Demo</button>
        </div>
      </div>
    </div>

    <div class="footerhint">
      Default accounts: <b>admin/admin123</b> • <b>manager/manager123</b><br/>
      After login go to Settings to change passwords.
    </div>
  </div>

  <script src="assets/js/app.js"></script>
  <script>
    (function(){
      // if already logged in
      const st = BMApp.loadState();
      const u = BMApp.getCurrentUser(st);
      if(u){ location.href = "dashboard.html"; return; }

      const uEl = document.getElementById("username");
      const pEl = document.getElementById("password");

      function doLogin(){
        const res = BMApp.signIn(uEl.value, pEl.value);
        if(res.ok){
          BMApp.toast("Login successful!", "good");
          setTimeout(()=>location.href="dashboard.html", 250);
        }else{
          BMApp.toast(res.message || "Login failed", "bad");
        }
      }

      document.getElementById("btnLogin").addEventListener("click", doLogin);
      document.getElementById("btnDemo").addEventListener("click", ()=>{
        uEl.value="admin"; pEl.value="admin123"; uEl.focus();
      });

      document.addEventListener("keydown", (e)=>{
        if(e.key==="Enter") doLogin();
      });
    })();
  </script>
</body>
</html>
